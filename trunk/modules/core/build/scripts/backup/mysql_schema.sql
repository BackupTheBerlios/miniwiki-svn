CREATE TABLE OPENJPA_SEQUENCE_TABLE (ID TINYINT NOT NULL, SEQUENCE_VALUE BIGINT, PRIMARY KEY (ID)) TYPE = innodb;
CREATE TABLE TBL_ATTACHEMENT (ID BIGINT NOT NULL, ATTACHMENT BLOB NOT NULL, CONTENT_TYPE VARCHAR(255) NOT NULL, NAME VARCHAR(255) NOT NULL, VERSION INTEGER, PAGE_ID BIGINT, PRIMARY KEY (ID), UNIQUE (ID)) TYPE = innodb;
CREATE TABLE TBL_GROUP (ID BIGINT NOT NULL, DESCRIPTION VARCHAR(255), NAME VARCHAR(255) NOT NULL, VERSION INTEGER, PRIMARY KEY (ID), UNIQUE (ID)) TYPE = innodb;
CREATE TABLE TBL_GROUP_PROPERTY (ID BIGINT NOT NULL, NAME VARCHAR(255) NOT NULL, VALUE VARCHAR(255) NOT NULL, VERSION INTEGER, GROUP_ID BIGINT, PRIMARY KEY (ID), UNIQUE (ID)) TYPE = innodb;
CREATE TABLE TBL_ID_GENERATOR (ID VARCHAR(255) NOT NULL, ID_VALUE BIGINT, PRIMARY KEY (ID)) TYPE = innodb;
CREATE TABLE TBL_PAGE (ID BIGINT NOT NULL, NAME VARCHAR(255) NOT NULL, VERSION INTEGER, PARENT_PAGE_ID BIGINT, CREATOR_ID BIGINT, LAST_MODIFIED_USER_ID BIGINT, SPACE_ID BIGINT, PRIMARY KEY (ID), UNIQUE (ID)) TYPE = innodb;
CREATE TABLE TBL_PAGE_PRIVILEDGE (ID BIGINT NOT NULL, NAME VARCHAR(255) NOT NULL, VERSION INTEGER, PAGE_ID BIGINT, PRIMARY KEY (ID), UNIQUE (ID), UNIQUE (NAME)) TYPE = innodb;
CREATE TABLE TBL_PAGE_PRIVILEDGE_VALUE (ID BIGINT NOT NULL, VALUE VARCHAR(255), VERSION INTEGER, PAGE_PRIVILEDGE_ID BIGINT, PRIMARY KEY (ID), UNIQUE (ID)) TYPE = innodb;
CREATE TABLE TBL_PAGE_PROPERTY (ID BIGINT NOT NULL, NAME VARCHAR(255) NOT NULL, VALUE VARCHAR(255) NOT NULL, VERSION INTEGER, PAGE_ID BIGINT, PRIMARY KEY (ID), UNIQUE (ID)) TYPE = innodb;
CREATE TABLE TBL_PREVIOUS_VERSION (ID BIGINT NOT NULL, NAME VARCHAR(255) NOT NULL, VERSION INTEGER, PAGE_ID BIGINT, USER_ID BIGINT, PRIMARY KEY (ID), UNIQUE (ID)) TYPE = innodb;
CREATE TABLE TBL_QUERIES (id BIGINT NOT NULL, PRIMARY KEY (id)) TYPE = innodb;
CREATE TABLE TBL_SPACE (ID BIGINT NOT NULL, NAME VARCHAR(255) NOT NULL, VERSION INTEGER, CREATOR_ID BIGINT, WIKI_ID BIGINT, PRIMARY KEY (ID), UNIQUE (ID), UNIQUE (NAME)) TYPE = innodb;
CREATE TABLE TBL_SPACE_PRIVILEDGE (ID BIGINT NOT NULL, NAME VARCHAR(255) NOT NULL, VERSION INTEGER, SPACE_ID BIGINT, PRIMARY KEY (ID), UNIQUE (ID)) TYPE = innodb;
CREATE TABLE TBL_SPACE_PRIVILEDGE_VALUE (ID BIGINT NOT NULL, VALUE VARCHAR(255), VERSION INTEGER, SPACE_PRIVILEDGE_ID BIGINT, PRIMARY KEY (ID), UNIQUE (ID)) TYPE = innodb;
CREATE TABLE TBL_USER (ID BIGINT NOT NULL, DESCRIPTION VARCHAR(255), FIRST_NAME VARCHAR(255), LAST_NAME VARCHAR(255), PASSWORD VARCHAR(255), USERNAME VARCHAR(255) NOT NULL, VERSION INTEGER, PRIMARY KEY (ID), UNIQUE (ID), UNIQUE (USERNAME)) TYPE = innodb;
CREATE TABLE TBL_USER_GROUP (USER_ID BIGINT, GROUP_ID BIGINT) TYPE = innodb;
CREATE TABLE TBL_USER_PROPERTY (ID BIGINT NOT NULL, NAME VARCHAR(255) NOT NULL, VALUE VARCHAR(255) NOT NULL, VERSION INTEGER, USER_ID BIGINT, PRIMARY KEY (ID), UNIQUE (ID)) TYPE = innodb;
CREATE TABLE TBL_WIKI (ID BIGINT NOT NULL, NAME VARCHAR(255) NOT NULL, VERSION INTEGER, PRIMARY KEY (ID), UNIQUE (ID)) TYPE = innodb;
CREATE TABLE TBL_WIKI_PRIVILEDGE (ID BIGINT NOT NULL, NAME VARCHAR(255) NOT NULL, VERSION INTEGER, WIKI_ID BIGINT, PRIMARY KEY (ID), UNIQUE (ID), UNIQUE (NAME)) TYPE = innodb;
CREATE TABLE TBL_WIKI_PRIVILEDGE_VALUE (ID BIGINT NOT NULL, VALUE VARCHAR(255) NOT NULL, VERSION INTEGER, WIKI_PRIVILEDGE_ID BIGINT, PRIMARY KEY (ID), UNIQUE (ID)) TYPE = innodb;
CREATE TABLE TBL_WIKI_PROPERTY (ID BIGINT NOT NULL, NAME VARCHAR(255) NOT NULL, VALUE VARCHAR(255) NOT NULL, VERSION INTEGER, WIKI_ID BIGINT, PRIMARY KEY (ID), UNIQUE (ID)) TYPE = innodb;
CREATE INDEX I_TBL_PGE_SPACE ON TBL_PAGE (SPACE_ID);
CREATE INDEX I_TBL_RSN_MODIFIEDBY ON TBL_PREVIOUS_VERSION (USER_ID);
CREATE INDEX I_TBL_GRP_USER_ID ON TBL_USER_GROUP (USER_ID);
ALTER TABLE TBL_ATTACHEMENT ADD FOREIGN KEY (PAGE_ID) REFERENCES TBL_PAGE (ID);
ALTER TABLE TBL_GROUP_PROPERTY ADD FOREIGN KEY (GROUP_ID) REFERENCES TBL_GROUP (ID);
ALTER TABLE TBL_PAGE ADD FOREIGN KEY (PARENT_PAGE_ID) REFERENCES TBL_PAGE (ID);
ALTER TABLE TBL_PAGE ADD FOREIGN KEY (CREATOR_ID) REFERENCES TBL_USER (ID);
ALTER TABLE TBL_PAGE ADD FOREIGN KEY (LAST_MODIFIED_USER_ID) REFERENCES TBL_USER (ID);
ALTER TABLE TBL_PAGE_PRIVILEDGE ADD FOREIGN KEY (PAGE_ID) REFERENCES TBL_PAGE (ID);
ALTER TABLE TBL_PAGE_PRIVILEDGE_VALUE ADD FOREIGN KEY (PAGE_PRIVILEDGE_ID) REFERENCES TBL_PAGE_PRIVILEDGE (ID);
ALTER TABLE TBL_PAGE_PROPERTY ADD FOREIGN KEY (PAGE_ID) REFERENCES TBL_PAGE (ID);
ALTER TABLE TBL_PREVIOUS_VERSION ADD FOREIGN KEY (PAGE_ID) REFERENCES TBL_PAGE (ID);
ALTER TABLE TBL_SPACE ADD FOREIGN KEY (CREATOR_ID) REFERENCES TBL_USER (ID);
ALTER TABLE TBL_SPACE ADD FOREIGN KEY (WIKI_ID) REFERENCES TBL_WIKI (ID);
ALTER TABLE TBL_SPACE_PRIVILEDGE ADD FOREIGN KEY (SPACE_ID) REFERENCES TBL_SPACE (ID);
ALTER TABLE TBL_SPACE_PRIVILEDGE_VALUE ADD FOREIGN KEY (SPACE_PRIVILEDGE_ID) REFERENCES TBL_SPACE_PRIVILEDGE (ID);
ALTER TABLE TBL_USER_GROUP ADD FOREIGN KEY (GROUP_ID) REFERENCES TBL_GROUP (ID);
ALTER TABLE TBL_USER_PROPERTY ADD FOREIGN KEY (USER_ID) REFERENCES TBL_USER (ID);
ALTER TABLE TBL_WIKI_PRIVILEDGE ADD FOREIGN KEY (WIKI_ID) REFERENCES TBL_WIKI (ID);
ALTER TABLE TBL_WIKI_PRIVILEDGE_VALUE ADD FOREIGN KEY (WIKI_PRIVILEDGE_ID) REFERENCES TBL_WIKI_PRIVILEDGE (ID);
ALTER TABLE TBL_WIKI_PROPERTY ADD FOREIGN KEY (WIKI_ID) REFERENCES TBL_WIKI (ID);
